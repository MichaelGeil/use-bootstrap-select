"use strict";function te(t){const{ubSelectClear:V,ubSelectSearch:q,ubSelectCreate:R,ubSelectMaxHeight:j}=t.dataset,C=V!==void 0,z=q!==void 0,W=R!==void 0,F=j||"25rem",v=t.multiple,w=t.disabled,E="use-bootstrap-select",T="d-flex align-items-center gap-1 text-start",G=T.replace("text-start","flex-wrap"),U="dropdown-menu w-100",J="ms-auto link-secondary d-inline-flex",K="form-control shadow-none",l="d-none",Q="d-inline-flex align-items-center gap-1 px-2 text-bg-secondary",M="var(--bs-dropdown-item-padding-y) var(--bs-dropdown-item-padding-x)",H='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>';function o(e,n){const s=document.createElement(e);if(n){for(const a in n)if(Object.prototype.hasOwnProperty.call(n,a)){const p=n[a];s[a]=p}}return s}function S(e,n){return Number.parseFloat(window.getComputedStyle(e).getPropertyValue(n))/16}const b=t.nextElementSibling;b&&b.classList.contains(E)&&b.remove();const L=o("div",{className:`dropdown ${E}`}),r=o("button",{type:"button",disabled:w,className:`${T} ${t.classList.value}`});r.setAttribute("data-bs-toggle","dropdown"),r.setAttribute("aria-expanded","false");const y=o("div",{className:G});r.append(y);const u=o("div",{className:U});u.style.maxHeight=F;const f=o("div");u.append(f);let d;C&&(d=o("span",{className:`${l} ${J}`,title:"Clear selection",innerHTML:H}),r.append(d));let i,c;if(z){i=o("input",{type:"text",className:K,placeholder:"Search"}),t.classList.contains("form-select-sm")&&i.classList.add("form-control-sm"),t.classList.contains("form-select-lg")&&i.classList.add("form-control-lg");const e=o("div");e.style.padding=M,e.append(i),u.prepend(e),c=o("div",{textContent:"No results found",className:l}),c.style.padding=M,u.append(c)}t.insertAdjacentElement("afterend",L),t.classList.add(l),L.append(r),u.style.fontSize=`${S(r,"font-size")}rem`,L.append(u);const g=bootstrap.Dropdown.getOrCreateInstance(r),N=S(r,"border-radius"),A=N>.0625?N-.0625:0;function k(){return t.options.length>0&&t.options[0].value===""}function X(e){const n=o("span",{innerHTML:e.innerHTML});return n.style.color="var(--bs-secondary-color)",n}function x(e,n){Array.from(t.options).forEach(s=>s.value===e&&(s.selected=n))}function h(){t.dispatchEvent(new Event("change"))}function $(e){x(e,!1),h()}function Y(e){const n=o("span",{className:`${Q}${w?" bg-opacity-50":""}`,textContent:e.innerHTML});A>0&&(n.style.borderRadius=`${A}rem`);const s=o("span",{className:"d-inline-flex",innerHTML:H});return w||(s.onclick=()=>{g.toggle(),$(e.value)}),n.prepend(s),n}function Z(){const e=Array.from(t.selectedOptions);return e.length<1&&v&&k()&&e.push(t.options[0]),e.map(n=>n.value===""?X(n):v?Y(n):n.innerHTML)}function D(e){x(e,!0),e!==""&&x("",!1),h()}function O(e,n=!1){const s=o("button",{type:"button",disabled:e.selected&&v||e.disabled,innerHTML:e.innerHTML,className:`dropdown-item${e.selected?" active":""}`});return n&&(s.style.paddingLeft="calc(var(--bs-dropdown-item-padding-x) * 2)"),s.addEventListener("click",()=>{D(e.value),r.focus()}),s}function _(){const e=[];return t.querySelectorAll(":scope>*").forEach(n=>{if(n instanceof HTMLOptionElement&&n.value!==""&&e.push(O(n)),n instanceof HTMLOptGroupElement){const s=o("h6",{className:"dropdown-header",innerHTML:n.label});e.push(s),n.querySelectorAll("option").forEach(a=>e.push(O(a,!0)))}}),e}function B(){return v?Array.from(t.selectedOptions).map(e=>e.value):t.value}function ee(){const e=B();return(Array.isArray(e)?e:[e]).filter(s=>s!=="").length<1}function I(){const e=t.form;e&&(r.classList.remove("is-valid","is-invalid"),e.classList.contains("was-validated")&&r.classList.add(t.validity.valid?"is-valid":"is-invalid"))}function P(){y.innerHTML="",f.innerHTML="",Z().reverse().forEach(e=>y.prepend(e)),_().forEach(e=>f.append(e)),C&&d&&(ee()?d.classList.add(l):d.classList.remove(l)),i&&(i.value=""),I()}P();function ne(){r.addEventListener("shown.bs.dropdown",()=>{if(i)i.focus();else{const s=f.querySelector(".active");s&&s.focus()}}),d&&d.addEventListener("click",s=>{s.stopPropagation(),g.toggle(),Array.from(t.options).forEach(a=>a.selected=!1),k()&&(t.value=""),h()});const e=i;e&&e.addEventListener("keyup",s=>{const a=e.value.trim();let p=0;if(f.querySelectorAll("button").forEach(m=>{m.classList.add(l),m.innerHTML.toLowerCase().includes(a.toLowerCase())&&(m.classList.remove(l),p++)}),c){if(p>0)c.classList.add(l);else if(c.classList.remove(l),W&&(c.innerHTML=`Press Enter to add "<b>${a}</b>"`,s.key==="Enter")){const m=o("option",{value:a,selected:!0,textContent:a});t.add(m,t.firstChild),g.toggle(),h(),r.focus(),c.classList.add(l)}}});const n=t.form;n&&new MutationObserver(a=>{a.forEach(p=>{p.attributeName==="class"&&I()})}).observe(n,{attributes:!0,attributeFilter:["class"]}),t.addEventListener("change",()=>P())}return ne(),{setValue:D,getValue:B,removeValue:$}}export{te as UseBootstrapSelect};
