"use strict";(()=>{function R(t,V){const{ubSelectClear:q,ubSelectSearch:j,ubSelectCreate:z,ubSelectMaxHeight:W,ubSelectSearchPlaceholder:F,ubSelectNoResultsText:U,ubSelectCreatableText:G}=t.dataset,T=q!==void 0,J=j!==void 0,K=z!==void 0,Q=W||"25rem",X=F||"Search",Y=U||"No results found",Z=G||"Press Enter to add {value}",v=t.multiple,w=t.disabled,C="use-bootstrap-select",S="d-flex align-items-center gap-1 text-start",_=S.replace("text-start","flex-wrap"),ee="dropdown-menu w-100",ne="ms-auto link-secondary d-inline-flex",te="form-control shadow-none",r="d-none",se="d-inline-flex align-items-center gap-1 px-2 text-bg-secondary",E="var(--bs-dropdown-item-padding-y) var(--bs-dropdown-item-padding-x)",M='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>';function o(e,n){const s=document.createElement(e);if(n){for(const a in n)if(Object.prototype.hasOwnProperty.call(n,a)){const p=n[a];s[a]=p}}return s}function H(e,n){return Number.parseFloat(window.getComputedStyle(e).getPropertyValue(n))/16}const b=t.nextElementSibling;b&&b.classList.contains(C)&&b.remove();const L=o("div",{className:`dropdown ${C}`}),l=o("button",{type:"button",disabled:w,className:`${S} ${t.classList.value}`});l.setAttribute("data-bs-toggle","dropdown"),l.setAttribute("aria-expanded","false");const y=o("div",{className:_});l.append(y);const u=o("div",{className:ee});u.style.maxHeight=Q;const f=o("div");u.append(f);let d;T&&(d=o("span",{className:`${r} ${ne}`,title:"Clear selection",innerHTML:M}),l.append(d));let c,i;if(J){c=o("input",{type:"text",className:te,placeholder:X}),t.classList.contains("form-select-sm")&&c.classList.add("form-control-sm"),t.classList.contains("form-select-lg")&&c.classList.add("form-control-lg");const e=o("div");e.style.padding=E,e.append(c),u.prepend(e),i=o("div",{textContent:Y,className:r}),i.style.padding=E,u.append(i)}t.insertAdjacentElement("afterend",L),t.classList.add(r),L.append(l),u.style.fontSize=`${H(l,"font-size")}rem`,L.append(u);const g=(V??bootstrap).Dropdown.getOrCreateInstance(l),N=H(l,"border-radius"),A=N>.0625?N-.0625:0;function k(){return t.options.length>0&&t.options[0].value===""}function oe(e){const n=o("span",{innerHTML:e.innerHTML});return n.style.color="var(--bs-secondary-color)",n}function x(e,n){Array.from(t.options).forEach(s=>s.value===e&&(s.selected=n))}function h(){t.dispatchEvent(new Event("change"))}function $(e){x(e,!1),h()}function ae(e){const n=o("span",{className:`${se}${w?" bg-opacity-50":""}`,textContent:e.innerHTML});A>0&&(n.style.borderRadius=`${A}rem`);const s=o("span",{className:"d-inline-flex",innerHTML:M});return w||(s.onclick=()=>{g.toggle(),$(e.value)}),n.prepend(s),n}function le(){const e=Array.from(t.selectedOptions);return e.length<1&&v&&k()&&e.push(t.options[0]),e.map(n=>n.value===""?oe(n):v?ae(n):n.innerHTML)}function D(e){x(e,!0),e!==""&&x("",!1),h()}function O(e,n=!1){const s=o("button",{type:"button",disabled:e.selected&&v||e.disabled,innerHTML:e.innerHTML,className:`dropdown-item${e.selected?" active":""}`});return n&&(s.style.paddingLeft="calc(var(--bs-dropdown-item-padding-x) * 2)"),s.addEventListener("click",()=>{D(e.value),l.focus()}),s}function re(){const e=[];return t.querySelectorAll(":scope>*").forEach(n=>{if(n instanceof HTMLOptionElement&&n.value!==""&&e.push(O(n)),n instanceof HTMLOptGroupElement){const s=o("h6",{className:"dropdown-header",innerHTML:n.label});e.push(s),n.querySelectorAll("option").forEach(a=>e.push(O(a,!0)))}}),e}function B(){return v?Array.from(t.selectedOptions).map(e=>e.value):t.value}function ce(){const e=B();return(Array.isArray(e)?e:[e]).filter(s=>s!=="").length<1}function P(){const e=t.form;e&&(l.classList.remove("is-valid","is-invalid"),e.classList.contains("was-validated")&&l.classList.add(t.validity.valid?"is-valid":"is-invalid"))}function I(){y.innerHTML="",f.innerHTML="",le().reverse().forEach(e=>y.prepend(e)),re().forEach(e=>f.append(e)),T&&d&&(ce()?d.classList.add(r):d.classList.remove(r)),c&&(c.value=""),P()}I();function ie(){l.addEventListener("shown.bs.dropdown",()=>{if(c)c.focus();else{const s=f.querySelector(".active");s&&s.focus()}}),d&&d.addEventListener("click",s=>{s.stopPropagation(),g.toggle(),Array.from(t.options).forEach(a=>a.selected=!1),k()&&(t.value=""),h()});const e=c;e&&e.addEventListener("keyup",s=>{const a=e.value.trim();let p=0;if(f.querySelectorAll("button").forEach(m=>{m.classList.add(r),m.innerHTML.toLowerCase().includes(a.toLowerCase())&&(m.classList.remove(r),p++)}),i){if(p>0)i.classList.add(r);else if(i.classList.remove(r),K&&(i.innerHTML=Z.replace("{value}",`<b>${a}</b>`),s.key==="Enter")){const m=o("option",{value:a,selected:!0,textContent:a});t.add(m,t.firstChild),g.toggle(),h(),l.focus(),i.classList.add(r)}}});const n=t.form;n&&new MutationObserver(a=>{a.forEach(p=>{p.attributeName==="class"&&P()})}).observe(n,{attributes:!0,attributeFilter:["class"]}),t.addEventListener("change",()=>I())}return ie(),{setValue:D,getValue:B,removeValue:$}}window.UseBootstrapSelect=R})();
